<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <div class="container">
      <h1>üí∞ –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</h1>
    </div>
  </header>

  <nav>
    <div class="container">
      <button class="tab-btn active" data-tab="calc">–ù–∞—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ä–∞—Å—á—ë—Ç</button>
      <button class="tab-btn" data-tab="history">–ò—Å—Ç–æ—Ä–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è</button>
      <button class="tab-btn" data-tab="tariffs">–¢–∞—Ä–∏—Ñ—ã</button>
      <button class="tab-btn" data-tab="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub</button>
    </div>
  </nav>

  <main class="container">
    <!-- –ù–∞—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ä–∞—Å—á—ë—Ç -->
    <section id="calc" class="tab-content active">
      <div class="card">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞—Ä—Ç–∏—Ä—É</h2>
        <select id="apartment" class="select-large">
          <option value="">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ...</option>
        </select>
      </div>

      <div id="calcPanel" style="display:none;">
        <!-- –í–≤–æ–¥ –ø–æ–∫–∞–∑–∞–Ω–∏–π –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü -->
        <div class="card highlight-card">
          <h3>‚ö° –í–≤–µ–¥–∏—Ç–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è –∑–∞ <span id="currentPeriod"></span></h3>
          <p class="hint">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤ –∏ –æ—Ç–º–µ—Ç—å—Ç–µ —É—Å–ª—É–≥–∏</p>
          
          <div id="inputForm"></div>
          
          <button onclick="saveData()" class="btn btn-primary btn-large">
            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è
          </button>
        </div>

        <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ -->
        <div class="card">
          <h3>–ò—Å—Ç–æ—Ä–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞</h3>
          <label class="switch-label">
            <input type="radio" name="viewMode" value="readings" checked> –ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤
            <input type="radio" name="viewMode" value="volumes"> –û–±—ä—ë–º—ã –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
          </label>
          <div id="historyTable"></div>
        </div>

        <!-- –ò—Ç–æ–≥–∏ –ø–æ –º–µ—Å—è—Ü–∞–º -->
        <div class="card">
          <h3>üí∞ –ò—Ç–æ–≥–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –ø–æ –º–µ—Å—è—Ü–∞–º</h3>
          <div id="totalsTable"></div>
        </div>
      </div>
    </section>

    <!-- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è -->
    <section id="history" class="tab-content">
      <div class="card">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è</h2>
        <select id="historyApartment" class="select-large">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞—Ä—Ç–∏—Ä—É...</option>
        </select>
      </div>

      <div id="historyPanel" style="display:none;">
        <div class="card">
          <h3>–¢–∞–±–ª–∏—Ü–∞ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è</h3>
          <div id="consumptionTable"></div>
        </div>

        <div class="card">
          <h3>–ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
          <canvas id="chart"></canvas>
        </div>
      </div>
    </section>

    <!-- –¢–∞—Ä–∏—Ñ—ã -->
    <section id="tariffs" class="tab-content">
      <div class="card">
        <h2>–î–µ–π—Å—Ç–≤—É—é—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã</h2>
        <div id="tariffsTable"></div>
      </div>

      <div class="card">
        <h3>–ò–∑–º–µ–Ω–∏—Ç—å —Ç–∞—Ä–∏—Ñ</h3>
        <div class="form-grid">
          <div>
            <label>–£—Å–ª—É–≥–∞</label>
            <select id="tariffService"></select>
          </div>
          <div>
            <label>–ù–æ–≤–∞—è —Ü–µ–Ω–∞ (‚ÇΩ)</label>
            <input type="number" id="tariffPrice" step="0.01">
          </div>
          <div>
            <label>–¢–∏–ø –∫–≤–∞—Ä—Ç–∏—Ä—ã (–¥–ª—è –æ—Ç–æ–ø–ª–µ–Ω–∏—è)</label>
            <select id="tariffAptType">
              <option value="all">–í—Å–µ</option>
              <option value="studio">–°—Ç—É–¥–∏–∏</option>
              <option value="duplex">–î–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤—ã–µ</option>
            </select>
          </div>
        </div>
        <button onclick="updateTariff()" class="btn btn-primary">–û–±–Ω–æ–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ</button>
      </div>
    </section>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <section id="settings" class="tab-content">
      <div class="card">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub</h2>
        <div class="form-grid">
          <div>
            <label>Owner (–≤–∞—à –ª–æ–≥–∏–Ω)</label>
            <input type="text" id="owner" placeholder="ashinoff">
          </div>
          <div>
            <label>Repository</label>
            <input type="text" id="repo" placeholder="Communal-billing">
          </div>
          <div>
            <label>Branch</label>
            <input type="text" id="branch" value="main">
          </div>
          <div>
            <label>Data folder</label>
            <input type="text" id="datadir" value="data">
          </div>
          <div class="full-width">
            <label>Personal Access Token</label>
            <input type="password" id="token" placeholder="ghp_...">
            <small>–¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</small>
          </div>
        </div>
        <button onclick="saveSettings()" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
        <div id="status"></div>
      </div>

      <div class="card">
        <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ</h3>
        <ol>
          <li>–°–æ–∑–¥–∞–π—Ç–µ Personal Access Token –≤ GitHub (Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens classic)</li>
          <li>–í—ã–±–µ—Ä–∏—Ç–µ scope: <code>repo</code> (–¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö) –∏–ª–∏ <code>public_repo</code> (–¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö)</li>
          <li>–°–æ–∑–¥–∞–π—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–∞–ø–∫—É <code>data</code> —Å CSV —Ñ–∞–π–ª–∞–º–∏</li>
          <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã—à–µ –∏ –Ω–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"</li>
        </ol>
      </div>
    </section>
  </main>

  <div id="loader" class="loader" style="display:none;">
    <div class="spinner"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
