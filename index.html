<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="container">
      <h1>üí∞ –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</h1>
      <p class="subtitle">–£—á—ë—Ç –∏ —Ä–∞—Å—á—ë—Ç –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥</p>
    </div>
  </header>

  <nav>
    <div class="container">
      <button class="tab-btn active" data-tab="calc">üìä –†–∞—Å—á—ë—Ç</button>
      <button class="tab-btn" data-tab="history">üìà –ò—Å—Ç–æ—Ä–∏—è</button>
      <button class="tab-btn" data-tab="tariffs">üíµ –¢–∞—Ä–∏—Ñ—ã</button>
      <button class="tab-btn" data-tab="settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>
  </nav>

  <main class="container">
    <!-- –ù–∞—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ä–∞—Å—á—ë—Ç -->
    <section id="calc" class="tab-content active">
      <div class="card">
        <h2>–ù–∞—á–∏—Å–ª–µ–Ω–∏—è –∏ —Ä–∞—Å—á—ë—Ç</h2>
        <div class="form-grid">
          <div class="form-group">
            <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞</label>
            <select id="calcApartment">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞—Ä—Ç–∏—Ä—É...</option>
            </select>
          </div>
          <div class="form-group">
            <label>–ì–æ–¥</label>
            <input id="calcYear" type="number" min="2000" max="2100" />
          </div>
          <div class="form-group">
            <label>–ú–µ—Å—è—Ü</label>
            <input id="calcMonth" type="number" min="1" max="12" />
          </div>
          <div class="form-group">
            <label>–†–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</label>
            <select id="viewMode">
              <option value="readings">–ü–æ–∫–∞–∑–∞–Ω–∏—è</option>
              <option value="volumes">–û–±—ä—ë–º—ã</option>
            </select>
          </div>
        </div>
        <button id="calcReload" class="btn btn-primary">–ü–æ–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
      </div>

      <div id="calcInputs" class="card" style="display:none;">
        <h3>–ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–≤</h3>
        <div id="calcInputsContent"></div>
      </div>

      <div id="calcTotals" class="card" style="display:none;">
        <h3>–ò—Ç–æ–≥–æ –∑–∞ –º–µ—Å—è—Ü</h3>
        <div id="calcTotalsContent"></div>
      </div>
    </section>

    <!-- –ò—Å—Ç–æ—Ä–∏—è -->
    <section id="history" class="tab-content">
      <div class="card">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –ø–æ –∫–≤–∞—Ä—Ç–∏—Ä–µ</h2>
        <div class="form-grid">
          <div class="form-group">
            <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞</label>
            <select id="histApartment">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–≤–∞—Ä—Ç–∏—Ä—É...</option>
            </select>
          </div>
        </div>
        <button id="histReload" class="btn btn-primary">–ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
      </div>
      
      <div id="histTable" class="card" style="display:none;">
        <h3>–¢–∞–±–ª–∏—Ü–∞ –ø–ª–∞—Ç–µ–∂–µ–π</h3>
        <div class="table-responsive">
          <div id="histTableContent"></div>
        </div>
      </div>
      
      <div id="histChartCard" class="card" style="display:none;">
        <h3>–ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
        <canvas id="histChart"></canvas>
      </div>
    </section>

    <!-- –¢–∞—Ä–∏—Ñ—ã -->
    <section id="tariffs" class="tab-content">
      <div class="card">
        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏</h2>
        <div class="form-grid">
          <div class="form-group">
            <label>–£—Å–ª—É–≥–∞</label>
            <select id="tarService">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É...</option>
            </select>
          </div>
          <div class="form-group">
            <label>–¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É</label>
            <input id="tarPrice" type="number" step="0.01" placeholder="0.00"/>
          </div>
          <div class="form-group">
            <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
            <input id="tarStart" type="date"/>
          </div>
          <div class="form-group">
            <label style="display: flex; align-items: center; gap: 8px;">
              <input id="tarHasEnd" type="checkbox"/>
              –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è
            </label>
            <input id="tarEnd" type="date" disabled/>
          </div>
        </div>
        <button id="addTariff" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å —Ç–∞—Ä–∏—Ñ</button>
      </div>
      
      <div id="tarTable" class="card">
        <h3>–¢–µ–∫—É—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã</h3>
        <div class="table-responsive">
          <div id="tarTableContent"></div>
        </div>
      </div>
    </section>

    <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <section id="settings" class="tab-content">
      <div class="card">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub</h2>
        <p class="info-text">
          –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ CSV-—Ñ–∞–π–ª–∞—Ö –≤ –≤–∞—à–µ–º GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. 
          –î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è Personal Access Token —Å –ø—Ä–∞–≤–∞–º–∏ <code>repo</code>.
        </p>
        
        <div class="form-grid">
          <div class="form-group">
            <label>GitHub Owner</label>
            <input id="owner" value="ashinoff" placeholder="username"/>
          </div>
          <div class="form-group">
            <label>–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</label>
            <input id="repo" value="Communal-billing" placeholder="repo-name"/>
          </div>
          <div class="form-group">
            <label>–í–µ—Ç–∫–∞</label>
            <input id="branch" value="main" placeholder="main"/>
          </div>
          <div class="form-group">
            <label>–ü–∞–ø–∫–∞ —Å –¥–∞–Ω–Ω—ã–º–∏</label>
            <input id="datadir" value="data" placeholder="data"/>
          </div>
          <div class="form-group full-width">
            <label>Personal Access Token</label>
            <input id="token" type="password" placeholder="ghp_..." />
            <small>–¢–æ–∫–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</small>
          </div>
        </div>
        
        <div class="button-group">
          <button id="saveSettings" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
          <button id="testConnection" class="btn btn-secondary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</button>
        </div>
        <div id="settingsStatus" class="status-message"></div>
      </div>

      <div class="card">
        <h3>–°–ø—Ä–∞–≤–∫–∞</h3>
        <div class="help-section">
          <h4>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å Personal Access Token?</h4>
          <ol>
            <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic)</li>
            <li>–ù–∞–∂–º–∏—Ç–µ "Generate new token (classic)"</li>
            <li>–í—ã–±–µ—Ä–∏—Ç–µ scope <code>repo</code> –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∏–ª–∏ <code>public_repo</code> –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö</li>
            <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ –≤—ã—à–µ</li>
          </ol>
          
          <h4>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö</h4>
          <p>–í –ø–∞–ø–∫–µ <code>data/</code> –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–∏–µ CSV —Ñ–∞–π–ª—ã:</p>
          <ul>
            <li><code>apartments.csv</code> ‚Äî –∫–≤–∞—Ä—Ç–∏—Ä—ã</li>
            <li><code>services.csv</code> ‚Äî —É—Å–ª—É–≥–∏</li>
            <li><code>tariffs.csv</code> ‚Äî —Ç–∞—Ä–∏—Ñ—ã</li>
            <li><code>meters.csv</code> ‚Äî —Å—á—ë—Ç—á–∏–∫–∏</li>
            <li><code>readings.csv</code> ‚Äî –ø–æ–∫–∞–∑–∞–Ω–∏—è</li>
            <li><code>adjustments.csv</code> ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏</li>
          </ul>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ ‚Ä¢ –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ GitHub ‚Ä¢ 2025</p>
    </div>
  </footer>

  <div id="loader" class="loader" style="display:none;">
    <div class="spinner"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
